# KTV预约应用

一个基于uni-app开发的KTV预约小程序和App，包含前端用户端和后台管理系统。

## 项目结构

```
ktvapp/
├── ktvapp/                 # uni-app前端项目
│   ├── pages/             # 页面目录
│   │   ├── login/         # 登录页面
│   │   ├── index/         # 首页
│   │   ├── mine/          # 我的页面
│   │   └── booking/       # 预约页面
│   ├── static/            # 静态资源
│   ├── App.vue            # 应用入口文件
│   ├── main.js            # 应用入口js
│   ├── pages.json         # 页面配置
│   └── manifest.json      # 应用配置
├── ktv-api/               # PHP后端API
│   ├── admin/             # 后台管理系统
│   ├── config.php         # 数据库配置
│   ├── init_db.sql        # 数据库初始化脚本
│   └── *.php              # API接口文件
└── ktv/                   # 设计素材
```

## 功能特性

### 用户端功能

1. **手机号验证码登录**
   - 支持手机号验证码登录
   - 自动创建用户账号
   - 用户信息本地存储

2. **首页功能**
   - 用户信息展示
   - KTV列表展示
   - 搜索附近商家
   - VIP会员状态

3. **我的页面**
   - 个人信息管理
   - 包厢卡管理
   - 预约记录查看
   - 设置和退出登录

4. **预约功能**
   - KTV详情展示
   - 预约时间选择
   - 包厢类型选择
   - 人数选择
   - 备注信息
   - 预约成功提示

### 后台管理功能

1. **管理员登录**
   - 用户名密码登录
   - 登录状态管理

2. **数据统计**
   - 总预约数统计
   - 预约状态统计
   - 用户数量统计

3. **预约管理**
   - 预约列表查看
   - 预约状态更新
   - 用户信息查看

## 技术栈

### 前端
- **uni-app**: 跨平台开发框架
- **Vue.js 3**: 前端框架
- **CSS3**: 样式设计
- **微信小程序**: 目标平台之一

### 后端
- **PHP**: 后端开发语言
- **MySQL**: 数据库
- **RESTful API**: 接口设计

## 开发环境搭建

### 前端开发

1. 安装HBuilderX或其他uni-app开发工具
2. 导入ktvapp项目
3. 配置小程序开发者工具
4. 运行到微信开发者工具

### 后端开发

1. 安装PHP环境（推荐PHP 7.4+）
2. 安装MySQL数据库
3. 配置Web服务器（Apache/Nginx）
4. 导入数据库：`mysql -u root -p < ktv-api/init_db.sql`
5. 修改`ktv-api/config.php`中的数据库配置

## 数据库设计

### 主要数据表

1. **users** - 用户表
   - 用户基本信息
   - 手机号、昵称、头像
   - VIP等级

2. **verification_codes** - 验证码表
   - 手机验证码记录
   - 过期时间控制

3. **ktv_venues** - KTV商家表
   - 商家基本信息
   - 地理位置信息
   - 评分状态

4. **bookings** - 预约表
   - 预约详细信息
   - 状态管理
   - 时间记录

5. **admins** - 管理员表
   - 管理员账号信息

## API接口

### 用户端接口

- `POST /send_code.php` - 发送验证码
- `POST /login.php` - 用户登录
- `GET /get_ktv_list.php` - 获取KTV列表
- `POST /create_booking.php` - 创建预约

### 管理端接口

- `POST /admin_login.php` - 管理员登录
- `GET /get_admin_stats.php` - 获取统计数据
- `GET /get_admin_bookings.php` - 获取预约列表
- `POST /update_booking_status.php` - 更新预约状态

## 当前开发状态

### 已完成功能

✅ 用户登录页面（模拟验证码登录）  
✅ 首页KTV列表展示  
✅ 我的页面个人信息  
✅ 预约功能完整流程  
✅ 后台管理系统界面  
✅ 数据库设计和API接口  

### 开发中功能

🔄 真实短信验证码集成  
🔄 地理位置定位功能  
🔄 支付功能集成  

### 计划功能

📋 用户评价系统  
📋 优惠券功能  
📋 推送通知  
📋 数据分析报表  

## 部署说明

### 前端部署

1. 使用HBuilderX发行到各个平台
2. 微信小程序：上传代码到微信公众平台
3. APP：打包成安装包发布

### 后端部署

1. 将`ktv-api`目录上传到服务器
2. 配置域名和SSL证书
3. 设置数据库连接
4. 配置CORS跨域访问

## 测试账号

### 用户端测试
- 手机号：任意11位手机号
- 验证码：1234

### 管理端测试
- 用户名：admin
- 密码：admin123

## 注意事项

1. **开发环境**：当前使用模拟数据，便于快速开发和测试
2. **生产环境**：需要集成真实的短信服务商API
3. **安全性**：生产环境需要加强token验证和数据加密
4. **性能优化**：大量数据时需要考虑分页和缓存策略

## 联系方式

如有问题请联系开发团队。

---

*最后更新时间：2024年* 