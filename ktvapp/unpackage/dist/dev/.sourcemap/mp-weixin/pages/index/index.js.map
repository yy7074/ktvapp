{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 状态栏占位 -->\r\n\t\t<view class=\"status-bar\" :style=\"{height: statusBarHeight + 'px'}\"></view>\r\n\t\t\r\n\t\t<!-- 头部用户信息 -->\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"user-info\">\r\n\t\t\t\t<image src=\"/static/1.jpg\" class=\"avatar\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"user-details\">\r\n\t\t\t\t\t<text class=\"username\">{{ userInfo.nickname || '柠檬水橘子' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 主要KTV预约卡片 -->\r\n\t\t<view class=\"main-ktv-card\">\r\n\t\t\t<view class=\"ktv-icon-container\">\r\n\t\t\t\t<view class=\"ktv-logo\">约</view>\r\n\t\t\t\t<view class=\"ktv-ribbon\">约</view>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"ktv-title\">搜索附近的商K</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 预约按钮 -->\r\n\t\t<view class=\"booking-btn\" @click=\"makeBooking\">\r\n\t\t\t<text class=\"booking-text\">预约</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部提示信息 -->\r\n\t\t<view class=\"bottom-notice\">\r\n\t\t\t<text class=\"notice-text\">预约成功，客服马上联系</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 自定义tabbar -->\r\n\t\t<custom-tabbar :current=\"0\"></custom-tabbar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport CustomTabbar from '../../components/custom-tabbar/custom-tabbar.vue';\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tCustomTabbar\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstatusBarHeight: 0,\r\n\t\t\tuserInfo: {},\r\n\t\t\tuserLocation: null, // 用户位置信息\r\n\t\t\tlocationPermissionGranted: false // 定位权限状态\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\t// 获取状态栏高度\r\n\t\ttry {\r\n\t\t\t// 优先使用新的API\r\n\t\t\tif (uni.getWindowInfo) {\r\n\t\t\t\tconst windowInfo = uni.getWindowInfo();\r\n\t\t\t\tthis.statusBarHeight = windowInfo.statusBarHeight;\r\n\t\t\t} else {\r\n\t\t\t\t// 兼容旧版本\r\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\tthis.statusBarHeight = systemInfo.statusBarHeight;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('获取系统信息失败，使用默认值');\r\n\t\t\tthis.statusBarHeight = 44; // 默认状态栏高度\r\n\t\t}\r\n\t\t\r\n\t\t// 检查登录状态\r\n\t\tthis.checkLogin();\r\n\t\t\r\n\t\t// 获取用户位置（用于预约时提交）\r\n\t\tthis.getUserLocation();\r\n\t},\r\n\tonShow() {\r\n\t\t// 每次显示页面时刷新用户信息\r\n\t\tthis.getUserInfo();\r\n\t},\r\n\tmethods: {\r\n\t\tcheckLogin() {\r\n\t\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\t\tif (!userInfo) {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.userInfo = userInfo;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tgetUserInfo() {\r\n\t\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\t\tif (userInfo) {\r\n\t\t\t\tthis.userInfo = userInfo;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 检查并请求定位权限\r\n\t\tasync checkLocationPermission() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t// 微信小程序权限检查\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t\t// 已授权\r\n\t\t\t\t\t\t\tconsole.log('微信小程序定位权限已授权');\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t} else if (res.authSetting['scope.userLocation'] === false) {\r\n\t\t\t\t\t\t\t// 用户拒绝过，需要引导到设置页面\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '定位权限',\r\n\t\t\t\t\t\t\t\tcontent: '为了为您推荐附近的KTV，请在设置中开启定位权限',\r\n\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\tsuccess: (modalRes) => {\r\n\t\t\t\t\t\t\t\t\tif (modalRes.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (settingRes) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (settingRes.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treject(new Error('用户未开启定位权限'));\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treject(new Error('用户拒绝开启定位权限'));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 未询问过权限，直接resolve，让uni.getLocation触发授权弹窗\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t// App端权限检查\r\n\t\t\t\tconst permissionID = 'android.permission.ACCESS_FINE_LOCATION';\r\n\t\t\t\tplus.android.requestPermissions([permissionID], (resultObj) => {\r\n\t\t\t\t\tconst result = resultObj.granted;\r\n\t\t\t\t\tif (result && result.length > 0) {\r\n\t\t\t\t\t\tconsole.log('App定位权限已授权');\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error('App定位权限被拒绝'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (error) => {\r\n\t\t\t\t\tconsole.log('请求定位权限失败:', error);\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t// H5端直接resolve\r\n\t\t\t\tconsole.log('H5端跳过权限检查');\r\n\t\t\t\tresolve();\r\n\t\t\t\t// #endif\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 获取用户位置\r\n\t\tasync getUserLocation() {\r\n\t\t\ttry {\r\n\t\t\t\tconsole.log('开始获取用户位置...');\r\n\t\t\t\t\r\n\t\t\t\t// 首先检查定位权限\r\n\t\t\t\tawait this.checkLocationPermission();\r\n\t\t\t\t\r\n\t\t\t\t// 显示定位提示\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '正在定位...',\r\n\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 获取位置信息\r\n\t\t\t\tconst locationResult = await uni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', // 国测局坐标系\r\n\t\t\t\t\tisHighAccuracy: true,\r\n\t\t\t\t\ttimeout: 15000, // 15秒超时\r\n\t\t\t\t\tgeocode: false, // 不需要地理编码\r\n\t\t\t\t\taltitude: false // 不需要海拔信息\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.userLocation = {\r\n\t\t\t\t\tlatitude: locationResult.latitude,\r\n\t\t\t\t\tlongitude: locationResult.longitude,\r\n\t\t\t\t\taccuracy: locationResult.accuracy\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tthis.locationPermissionGranted = true;\r\n\t\t\t\tconsole.log('用户位置获取成功:', this.userLocation);\r\n\t\t\t\t\r\n\t\t\t\t// 隐藏定位提示\r\n\t\t\t\tuni.hideToast();\r\n\t\t\t\t\r\n\t\t\t\t// 位置获取成功，可用于预约时提交\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '定位成功',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('获取位置失败:', error);\r\n\t\t\t\t\r\n\t\t\t\t// 隐藏定位提示\r\n\t\t\t\tuni.hideToast();\r\n\t\t\t\t\r\n\t\t\t\t// 根据错误类型进行不同处理\r\n\t\t\t\tif (error.errCode === 2 || (error.errMsg && error.errMsg.includes('denied')) || error.message === 'App定位权限被拒绝') {\r\n\t\t\t\t\t// 用户拒绝了定位权限\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '定位权限',\r\n\t\t\t\t\t\tcontent: '为了为您推荐附近的KTV，需要开启定位权限。您可以在系统设置中开启。',\r\n\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\tcancelText: '稍后再说',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t\t\t\tplus.runtime.openURL('app-settings:');\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\tuni.openSetting();\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 用户可以稍后在预约时重新尝试获取位置\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (error.errCode === 3 || (error.errMsg && error.errMsg.includes('timeout'))) {\r\n\t\t\t\t\t// 定位超时\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '定位超时，可稍后重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (error.errCode === 1002 || (error.errMsg && error.errMsg.includes('network'))) {\r\n\t\t\t\t\t// 网络错误\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络异常，可稍后重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 其他定位错误\r\n\t\t\t\t\tconsole.log('定位失败，使用默认位置:', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '定位失败，仍可继续预约',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync makeBooking() {\r\n\t\t\ttry {\r\n\t\t\t\t// 确保有位置信息用于预约\r\n\t\t\t\tif (!this.userLocation) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '正在获取位置...',\r\n\t\t\t\t\t\ticon: 'loading'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait this.getUserLocation();\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('获取位置失败，但仍可继续预约');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 显示预约提示\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '提交预约中...'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 准备预约数据\r\n\t\t\t\tconst bookingData = {\r\n\t\t\t\t\tuser_phone: this.userInfo.phone || '',\r\n\t\t\t\t\tuser_name: this.userInfo.nickname || '柠檬水橘子',\r\n\t\t\t\t\tbooking_time: new Date().toLocaleString('zh-CN'),\r\n\t\t\t\t\tlatitude: this.userLocation?.latitude || '',\r\n\t\t\t\t\tlongitude: this.userLocation?.longitude || '',\r\n\t\t\t\t\tremark: 'KTV预约 - 从首页快速预约'\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 提交预约到服务器\r\n\t\t\t\tconst res = await uni.request({\r\n\t\t\t\t\turl: 'http://catdog.dachaonet.com/quick_booking.php',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: bookingData,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t'Authorization': 'Bearer ' + uni.getStorageSync('token')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\r\n\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '预约成功，客服将联系您',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.data.message || '预约失败，请重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('预约失败:', error);\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\r\n\t\t\t\t// 即使网络失败也显示成功，本地存储预约信息\r\n\t\t\t\tconst bookingInfo = {\r\n\t\t\t\t\tuser: this.userInfo.nickname || '柠檬水橘子',\r\n\t\t\t\t\tphone: this.userInfo.phone || '',\r\n\t\t\t\t\ttime: new Date().toLocaleString('zh-CN'),\r\n\t\t\t\t\tlocation: this.userLocation\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 存储到本地\r\n\t\t\t\tconst localBookings = uni.getStorageSync('local_bookings') || [];\r\n\t\t\t\tlocalBookings.push(bookingInfo);\r\n\t\t\t\tuni.setStorageSync('local_bookings', localBookings);\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '预约已记录，客服将联系您',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 3000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n\tmin-height: 100vh;\r\n\tbackground: linear-gradient(135deg, #434343 0%, #2C2C2E 100%);\r\n\tcolor: white;\r\n\tpadding-bottom: 160rpx; /* 为自定义tabbar留出空间 */\r\n}\r\n\r\n.status-bar {\r\n\twidth: 100%;\r\n}\r\n\r\n.header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 40rpx 60rpx;\r\n\tmargin-bottom: 40rpx;\r\n}\r\n\r\n.user-info {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.avatar {\r\n\twidth: 120rpx;\r\n\theight: 120rpx;\r\n\tborder-radius: 60rpx;\r\n\tmargin-right: 30rpx;\r\n}\r\n\r\n.user-details {\r\n\tflex: 1;\r\n}\r\n\r\n.username {\r\n\tdisplay: block;\r\n\tfont-size: 36rpx;\r\n\tfont-weight: 500;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.vip-info {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.vip-icon {\r\n\twidth: 40rpx;\r\n\theight: 20rpx;\r\n\tmargin-right: 15rpx;\r\n}\r\n\r\n.vip-text {\r\n\tfont-size: 28rpx;\r\n\tcolor: #FFD700;\r\n}\r\n\r\n.upgrade-btn {\r\n\tbackground: #7ED321;\r\n\tcolor: #2C2C2E;\r\n\tborder: none;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 20rpx 40rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: 500;\r\n}\r\n\r\n/* 主KTV卡片 */\r\n.main-ktv-card {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tpadding: 80rpx 60rpx 60rpx;\r\n\tmargin-bottom: 60rpx;\r\n}\r\n\r\n.ktv-icon-container {\r\n\tposition: relative;\r\n\twidth: 400rpx;\r\n\theight: 500rpx;\r\n\tbackground: linear-gradient(135deg, #7ED321 0%, #5CB85C 100%);\r\n\tborder-radius: 60rpx 60rpx 40rpx 40rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmargin-bottom: 40rpx;\r\n\tbox-shadow: 0 20rpx 40rpx rgba(126, 211, 33, 0.3);\r\n}\r\n\r\n.ktv-logo {\r\n\tfont-size: 120rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #2C2C2E;\r\n}\r\n\r\n.ktv-ribbon {\r\n\tposition: absolute;\r\n\ttop: 80rpx;\r\n\tright: 60rpx;\r\n\tbackground: #FFD700;\r\n\tcolor: #2C2C2E;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tpadding: 8rpx 20rpx;\r\n\tborder-radius: 20rpx;\r\n\ttransform: rotate(15deg);\r\n}\r\n\r\n.ktv-title {\r\n\tfont-size: 28rpx;\r\n\tcolor: #FFFFFF;\r\n\ttext-align: center;\r\n}\r\n\r\n/* 预约按钮 */\r\n.booking-btn {\r\n\tposition: fixed;\r\n\tbottom: 280rpx;\r\n\tleft: 60rpx;\r\n\tright: 60rpx;\r\n\tbackground: #7ED321;\r\n\tborder-radius: 50rpx;\r\n\tpadding: 40rpx;\r\n\ttext-align: center;\r\n\tbox-shadow: 0 10rpx 30rpx rgba(126, 211, 33, 0.4);\r\n}\r\n\r\n.booking-text {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: 600;\r\n\tcolor: #2C2C2E;\r\n}\r\n\r\n/* 底部提示信息 */\r\n.bottom-notice {\r\n\tposition: fixed;\r\n\tbottom: 200rpx;\r\n\tleft: 0;\r\n\tright: 0;\r\n\ttext-align: center;\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.notice-text {\r\n\tfont-size: 28rpx;\r\n\tcolor: #CCCCCC;\r\n}\r\n</style>","import MiniProgramPage from '/Users/yy/Documents/GitHub/ktvapp/ktvapp/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAwCA,qBAAqB,MAAW;AAEhC,MAAK,YAAU;AAAA,EACd,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,iBAAiB;AAAA,MACjB,UAAU,CAAE;AAAA,MACZ,cAAc;AAAA;AAAA,MACd,2BAA2B;AAAA;AAAA,IAC5B;AAAA,EACA;AAAA,EACD,SAAS;AAER,QAAI;AAEH,UAAIA,cAAAA,MAAI,eAAe;AACtB,cAAM,aAAaA,oBAAI;AACvB,aAAK,kBAAkB,WAAW;AAAA,aAC5B;AAEN,cAAM,aAAaA,oBAAI;AACvB,aAAK,kBAAkB,WAAW;AAAA,MACnC;AAAA,IACC,SAAO,OAAO;AACfA,oBAAAA,MAAY,MAAA,OAAA,+BAAA,gBAAgB;AAC5B,WAAK,kBAAkB;AAAA,IACxB;AAGA,SAAK,WAAU;AAGf,SAAK,gBAAe;AAAA,EACpB;AAAA,EACD,SAAS;AAER,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,SAAS;AAAA,IACR,aAAa;AACZ,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAI,CAAC,UAAU;AACdA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK;AAAA,QACN,CAAC;AAAA,aACK;AACN,aAAK,WAAW;AAAA,MACjB;AAAA,IACA;AAAA,IAED,cAAc;AACb,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAI,UAAU;AACb,aAAK,WAAW;AAAA,MACjB;AAAA,IACA;AAAA;AAAA,IAGD,MAAM,0BAA0B;AAC/B,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAGvCA,sBAAAA,MAAI,WAAW;AAAA,UACd,SAAS,CAAC,QAAQ;AACjB,gBAAI,IAAI,YAAY,oBAAoB,GAAG;AAE1CA,4BAAAA,MAAA,MAAA,OAAA,gCAAY,cAAc;AAC1B;YACC,WAAS,IAAI,YAAY,oBAAoB,MAAM,OAAO;AAE3DA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,SAAS;AAAA,gBACT,aAAa;AAAA,gBACb,SAAS,CAAC,aAAa;AACtB,sBAAI,SAAS,SAAS;AACrBA,kCAAAA,MAAI,YAAY;AAAA,sBACf,SAAS,CAAC,eAAe;AACxB,4BAAI,WAAW,YAAY,oBAAoB,GAAG;AACjD;+BACM;AACN,iCAAO,IAAI,MAAM,WAAW,CAAC;AAAA,wBAC9B;AAAA,sBACD;AAAA,oBACD,CAAC;AAAA,yBACK;AACN,2BAAO,IAAI,MAAM,YAAY,CAAC;AAAA,kBAC/B;AAAA,gBACD;AAAA,cACD,CAAC;AAAA,mBACK;AAEN;YACD;AAAA,UACD;AAAA,QACD,CAAC;AAAA,MAyBF,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,kBAAkB;AACvB,UAAI;AACHA,sBAAAA,mDAAY,aAAa;AAGzB,cAAM,KAAK;AAGXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACX,CAAC;AAGD,cAAM,iBAAiB,MAAMA,cAAG,MAAC,YAAY;AAAA,UAC5C,MAAM;AAAA;AAAA,UACN,gBAAgB;AAAA,UAChB,SAAS;AAAA;AAAA,UACT,SAAS;AAAA;AAAA,UACT,UAAU;AAAA;AAAA,QACX,CAAC;AAED,aAAK,eAAe;AAAA,UACnB,UAAU,eAAe;AAAA,UACzB,WAAW,eAAe;AAAA,UAC1B,UAAU,eAAe;AAAA;AAG1B,aAAK,4BAA4B;AACjCA,sBAAY,MAAA,MAAA,OAAA,gCAAA,aAAa,KAAK,YAAY;AAG1CA,sBAAG,MAAC,UAAS;AAGbA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACX,CAAC;AAAA,MAEA,SAAO,OAAO;AACfA,sBAAA,MAAA,MAAA,OAAA,gCAAY,WAAW,KAAK;AAG5BA,sBAAG,MAAC,UAAS;AAGb,YAAI,MAAM,YAAY,KAAM,MAAM,UAAU,MAAM,OAAO,SAAS,QAAQ,KAAM,MAAM,YAAY,cAAc;AAE/GA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,YAAY;AAAA,YACZ,SAAS,CAAC,QAAQ;AACjB,kBAAI,IAAI,SAAS;AAKhBA,8BAAG,MAAC,YAAW;AAAA,cAEhB;AAAA,YAED;AAAA,UACD,CAAC;AAAA,QACF,WAAW,MAAM,YAAY,KAAM,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS,GAAI;AAErFA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,QACF,WAAW,MAAM,YAAY,QAAS,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS,GAAI;AAExFA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,eACK;AAENA,wBAAY,MAAA,MAAA,OAAA,gCAAA,gBAAgB,KAAK;AACjCA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,QACF;AAAA,MACD;AAAA,IACA;AAAA,IAED,MAAM,cAAc;;AACnB,UAAI;AAEH,YAAI,CAAC,KAAK,cAAc;AACvBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAED,cAAI;AACH,kBAAM,KAAK;UACV,SAAO,OAAO;AACfA,0BAAAA,mDAAY,gBAAgB;AAAA,UAC7B;AAAA,QACD;AAGAA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,QACR,CAAC;AAGD,cAAM,cAAc;AAAA,UACnB,YAAY,KAAK,SAAS,SAAS;AAAA,UACnC,WAAW,KAAK,SAAS,YAAY;AAAA,UACrC,eAAc,oBAAI,QAAO,eAAe,OAAO;AAAA,UAC/C,YAAU,UAAK,iBAAL,mBAAmB,aAAY;AAAA,UACzC,aAAW,UAAK,iBAAL,mBAAmB,cAAa;AAAA,UAC3C,QAAQ;AAAA;AAIT,cAAM,MAAM,MAAMA,cAAG,MAAC,QAAQ;AAAA,UAC7B,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,QAAQ;AAAA,YACP,gBAAgB;AAAA,YAChB,iBAAiB,YAAYA,oBAAI,eAAe,OAAO;AAAA,UACxD;AAAA,QACD,CAAC;AAEDA,sBAAG,MAAC,YAAW;AAEf,YAAI,IAAI,KAAK,SAAS;AACrBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,eACK;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,KAAK,WAAW;AAAA,YAC3B,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,QACF;AAAA,MAEC,SAAO,OAAO;AACfA,sBAAA,MAAA,MAAA,SAAA,gCAAc,SAAS,KAAK;AAC5BA,sBAAG,MAAC,YAAW;AAGf,cAAM,cAAc;AAAA,UACnB,MAAM,KAAK,SAAS,YAAY;AAAA,UAChC,OAAO,KAAK,SAAS,SAAS;AAAA,UAC9B,OAAM,oBAAI,QAAO,eAAe,OAAO;AAAA,UACvC,UAAU,KAAK;AAAA;AAIhB,cAAM,gBAAgBA,cAAG,MAAC,eAAe,gBAAgB,KAAK,CAAA;AAC9D,sBAAc,KAAK,WAAW;AAC9BA,sBAAAA,MAAI,eAAe,kBAAkB,aAAa;AAElDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACX,CAAC;AAAA,MACF;AAAA,IACA;AAAA,EAEF;AACD;;;;;;;;;;;;;;;;;;;;;ACxVA,GAAG,WAAW,eAAe;"}