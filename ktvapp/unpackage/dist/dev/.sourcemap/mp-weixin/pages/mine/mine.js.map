{"version":3,"file":"mine.js","sources":["pages/mine/mine.vue","pages/mine/mine.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 状态栏占位 -->\n\t\t<view class=\"status-bar\" :style=\"{height: statusBarHeight + 'px'}\"></view>\n\t\t\n\t\t<!-- 头部用户信息卡片 - 像素级还原设计图 -->\n\t\t<view class=\"header-card\">\n\t\t\t<view class=\"profile-card\">\n\t\t\t\t<!-- 用户头像 -->\n\t\t\t\t<view class=\"avatar-container\">\n\t\t\t\t\t<image src=\"/static/1.jpg\" class=\"user-avatar\" mode=\"aspectFill\"></image>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 用户姓名 -->\n\t\t\t\t<text class=\"user-name\">{{ userInfo.nickname || '柠檬水橘子' }}</text>\n\t\t\t\t\n\t\t\t\t<!-- VIP徽章 -->\n\t\t\t\t<view class=\"vip-section\">\n\t\t\t\t\t<view class=\"vip-badge\">\n\t\t\t\t\t\t<text class=\"vip-diamond\">💎</text>\n\t\t\t\t\t\t<text class=\"vip-text\">KTV会员</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 订阅会员按钮 -->\n\t\t\t\t<button class=\"subscribe-button\" @click=\"upgradeVip\">订阅会员</button>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 包厢卡片标题 -->\n\t\t<view class=\"section-title\">\n\t\t\t<text class=\"title-text\">包厢卡</text>\n\t\t</view>\n\t\t\n\t\t<!-- 包厢卡片列表 -->\n\t\t<view class=\"card-list\" v-if=\"cardList.length > 0\">\n\t\t\t<view \n\t\t\t\tclass=\"card-item\" \n\t\t\t\tv-for=\"(item, index) in cardList\" \n\t\t\t\t:key=\"index\"\n\t\t\t\t@click=\"viewCard(item)\"\n\t\t\t>\n\t\t\t\t<view class=\"card-content\">\n\t\t\t\t\t<view class=\"card-tag\">\n\t\t\t\t\t\t<image src=\"/static/yue.jpg\" class=\"tag-bg\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t<text class=\"tag-text\">约</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"card-name\">{{ item.name }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"card-status\">\n\t\t\t\t\t<text class=\"status-text\" :class=\"item.status\">{{ getStatusText(item.status) }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 空状态 -->\n\t\t<view class=\"empty-state\" v-else>\n\t\t\t<image src=\"/static/yue.jpg\" class=\"empty-icon\" mode=\"aspectFit\"></image>\n\t\t\t<text class=\"empty-text\">空空如也</text>\n\t\t</view>\n\t\t\n\t\t<!-- 菜单列表 -->\n\t\t<view class=\"menu-list\">\n\t\t\t<view class=\"menu-item\" @click=\"goToBookings\">\n\t\t\t\t<text class=\"menu-text\">我的预约</text>\n\t\t\t\t<image src=\"/static/返 回@1x.png\" class=\"menu-arrow\" mode=\"aspectFit\"></image>\n\t\t\t</view>\n\t\t\t<view class=\"menu-item\" @click=\"logout\">\n\t\t\t\t<text class=\"menu-text\">退出登录</text>\n\t\t\t\t<image src=\"/static/返 回@1x.png\" class=\"menu-arrow\" mode=\"aspectFit\"></image>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 自定义tabbar -->\n\t\t<custom-tabbar :current=\"1\"></custom-tabbar>\n\t</view>\n</template>\n\n<script>\nimport CustomTabbar from '../../components/custom-tabbar/custom-tabbar.vue';\n\nexport default {\n\tcomponents: {\n\t\tCustomTabbar\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: 0,\n\t\t\tuserInfo: {},\n\t\t\tcardList: []\n\t\t}\n\t},\n\tonLoad() {\n\t\t// 获取状态栏高度\n\t\ttry {\n\t\t\t// 优先使用新的API\n\t\t\tif (uni.getWindowInfo) {\n\t\t\t\tconst windowInfo = uni.getWindowInfo();\n\t\t\t\tthis.statusBarHeight = windowInfo.statusBarHeight;\n\t\t\t} else {\n\t\t\t\t// 兼容旧版本\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\n\t\t\t\tthis.statusBarHeight = systemInfo.statusBarHeight;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log('获取系统信息失败，使用默认值');\n\t\t\tthis.statusBarHeight = 44; // 默认状态栏高度\n\t\t}\n\t},\n\tonShow() {\n\t\t// 每次显示页面时刷新数据\n\t\tthis.getUserInfo();\n\t\tthis.getCardList();\n\t},\n\tmethods: {\n\t\tgetUserInfo() {\n\t\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\t\tif (userInfo) {\n\t\t\t\tthis.userInfo = userInfo;\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync getCardList() {\n\t\t\ttry {\n\t\t\t\t// 模拟获取包厢卡列表（开发阶段）\n\t\t\t\tconsole.log('模拟获取包厢卡列表');\n\t\t\t\t\n\t\t\t\t// 模拟网络延迟\n\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 500));\n\t\t\t\t\n\t\t\t\t// 模拟预约数据 - 显示用户的预约记录\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\t\t\tconst mockBookings = uni.getStorageSync('mockBookings') || [];\n\t\t\t\t\n\t\t\t\tthis.cardList = mockBookings.map(booking => ({\n\t\t\t\t\tid: booking.id,\n\t\t\t\t\tname: booking.ktv_name,\n\t\t\t\t\tstatus: booking.status,\n\t\t\t\t\tbooking_time: booking.booking_time,\n\t\t\t\t\troom_type: booking.room_type,\n\t\t\t\t\tpeople_count: booking.people_count,\n\t\t\t\t\tcreated_at: booking.created_at\n\t\t\t\t}));\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('获取包厢卡列表失败:', error);\n\t\t\t\tthis.cardList = [];\n\t\t\t}\n\t\t},\n\t\t\n\t\tgetStatusText(status) {\n\t\t\tconst statusMap = {\n\t\t\t\t'pending': '待确认',\n\t\t\t\t'confirmed': '已确认',\n\t\t\t\t'completed': '已完成',\n\t\t\t\t'cancelled': '已取消'\n\t\t\t};\n\t\t\treturn statusMap[status] || '未知';\n\t\t},\n\t\t\n\t\tviewCard(item) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/booking/booking?id=${item.id}&mode=view`\n\t\t\t});\n\t\t},\n\t\t\n\t\tupgradeVip() {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '会员功能开发中',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t},\n\t\t\n\t\tgoToBookings() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/bookings/bookings'\n\t\t\t});\n\t\t},\n\t\t\n\n\t\t\n\t\tlogout() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定要退出登录吗？',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.removeStorageSync('userInfo');\n\t\t\t\t\t\tuni.removeStorageSync('token');\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #434343 0%, #313640 100%);\n\tcolor: white;\n\tpadding-bottom: 160rpx; /* 为自定义tabbar留出空间 */\n}\n\n.status-bar {\n\twidth: 100%;\n}\n\n/* === 像素级还原设计图卡片样式 === */\n.header-card {\n\tpadding: 32rpx 32rpx 0 32rpx;\n\tmargin-bottom: 40rpx;\n}\n\n.profile-card {\n\tposition: relative;\n\tbackground: #2A2E3A;\n\tborder-radius: 32rpx;\n\tpadding: 0;\n\theight: 240rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.25);\n\toverflow: hidden;\n}\n\n/* 头像样式 - 精确还原设计图 */\n.avatar-container {\n\tposition: absolute;\n\tleft: 32rpx;\n\ttop: 32rpx;\n\twidth: 120rpx;\n\theight: 120rpx;\n\tborder-radius: 60rpx;\n\tborder: 4rpx solid #FFFFFF;\n\toverflow: hidden;\n\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.3);\n}\n\n.user-avatar {\n\twidth: 100%;\n\theight: 100%;\n}\n\n/* 用户名 - 精确位置还原设计图 */\n.user-name {\n\tposition: absolute;\n\tleft: 180rpx;\n\ttop: 68rpx;\n\tfont-size: 40rpx;\n\tfont-weight: 500;\n\tcolor: #FFFFFF;\n\tletter-spacing: 1rpx;\n\tline-height: 1.2;\n}\n\n/* VIP区域 */\n.vip-section {\n\tposition: absolute;\n\tleft: 32rpx;\n\tbottom: 32rpx;\n}\n\n.vip-badge {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.vip-diamond {\n\tfont-size: 32rpx;\n\tcolor: #FFD700;\n}\n\n.vip-text {\n\tfont-size: 28rpx;\n\tcolor: #FFD700;\n\tfont-weight: 500;\n}\n\n/* 订阅会员按钮 - 精确还原设计图 */\n.subscribe-button {\n\tposition: absolute;\n\tright: 32rpx;\n\tbottom: 32rpx;\n\tbackground: #7ED321;\n\tcolor: #1C1C1E;\n\tborder: none;\n\tborder-radius: 44rpx;\n\tpadding: 16rpx 32rpx;\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tbox-shadow: 0 4rpx 16rpx rgba(126, 211, 33, 0.4);\n\tmin-width: 140rpx;\n\theight: 64rpx;\n\tline-height: 32rpx;\n}\n\n\n.section-title {\n\tpadding: 0 60rpx;\n\tmargin-bottom: 28rpx;\n}\n\n.title-text {\n\tfont-size: 32rpx;\n\tfont-weight: 500;\n\tposition: relative;\n}\n\n.title-text::after {\n\tcontent: '';\n\tposition: absolute;\n\tleft: 0;\n\tbottom: -10rpx;\n\twidth: 60rpx;\n\theight: 4rpx;\n\tbackground: #7ED321;\n}\n\n.card-list {\n\tpadding: 0 60rpx;\n\tmargin-bottom: 60rpx;\n}\n\n.card-item {\n\tbackground: rgba(255, 255, 255, 0.1);\n\tborder-radius: 20rpx;\n\tpadding: 40rpx;\n\tmargin-bottom: 30rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.card-content {\n\tflex: 1;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.card-tag {\n\tposition: relative;\n\twidth: 120rpx;\n\theight: 160rpx;\n\tmargin-right: 30rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.tag-bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n}\n\n.tag-text {\n\tposition: relative;\n\tz-index: 2;\n\tfont-size: 48rpx;\n\tfont-weight: bold;\n\tcolor: #2C2C2E;\n}\n\n.card-name {\n\tfont-size: 32rpx;\n\tfont-weight: 500;\n}\n\n.card-status {\n\tpadding: 10rpx 20rpx;\n\tborder-radius: 20rpx;\n}\n\n.status-text {\n\tfont-size: 24rpx;\n}\n\n.status-text.pending {\n\tcolor: #FF9500;\n}\n\n.status-text.confirmed {\n\tcolor: #7ED321;\n}\n\n.status-text.completed {\n\tcolor: #999999;\n}\n\n.status-text.cancelled {\n\tcolor: #FF3B30;\n}\n\n.empty-state {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 140rpx 60rpx;\n\tmargin-bottom: 60rpx;\n}\n\n.empty-icon {\n\twidth: 200rpx;\n\theight: 200rpx;\n\topacity: 0.3;\n\tmargin-bottom: 40rpx;\n}\n\n.empty-text {\n\tfont-size: 32rpx;\n\tcolor: #999999;\n}\n\n.menu-list {\n\tpadding: 0 60rpx;\n}\n\n.menu-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 40rpx 0;\n\tborder-bottom: 1rpx solid rgba(255, 255, 255, 0.1);\n}\n\n.menu-item:last-child {\n\tborder-bottom: none;\n}\n\n.menu-text {\n\tfont-size: 32rpx;\n}\n\n.menu-arrow {\n\twidth: 20rpx;\n\theight: 20rpx;\n\ttransform: rotate(180deg);\n\topacity: 0.6;\n}\n\n</style> ","import MiniProgramPage from '/Users/yy/Documents/GitHub/ktvapp/ktvapp/pages/mine/mine.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AA+EA,qBAAqB,MAAW;AAEhC,MAAK,YAAU;AAAA,EACd,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,iBAAiB;AAAA,MACjB,UAAU,CAAE;AAAA,MACZ,UAAU,CAAC;AAAA,IACZ;AAAA,EACA;AAAA,EACD,SAAS;AAER,QAAI;AAEH,UAAIA,cAAAA,MAAI,eAAe;AACtB,cAAM,aAAaA,oBAAI;AACvB,aAAK,kBAAkB,WAAW;AAAA,aAC5B;AAEN,cAAM,aAAaA,oBAAI;AACvB,aAAK,kBAAkB,WAAW;AAAA,MACnC;AAAA,IACC,SAAO,OAAO;AACfA,oBAAAA,MAAY,MAAA,OAAA,8BAAA,gBAAgB;AAC5B,WAAK,kBAAkB;AAAA,IACxB;AAAA,EACA;AAAA,EACD,SAAS;AAER,SAAK,YAAW;AAChB,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,SAAS;AAAA,IACR,cAAc;AACb,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAI,UAAU;AACb,aAAK,WAAW;AAAA,MACjB;AAAA,IACA;AAAA,IAED,MAAM,cAAc;AACnB,UAAI;AAEHA,sBAAAA,MAAY,MAAA,OAAA,8BAAA,WAAW;AAGvB,cAAM,IAAI,QAAQ,aAAW,WAAW,SAAS,GAAG,CAAC;AAGrD,cAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,cAAM,eAAeA,cAAG,MAAC,eAAe,cAAc,KAAK,CAAA;AAE3D,aAAK,WAAW,aAAa,IAAI,cAAY;AAAA,UAC5C,IAAI,QAAQ;AAAA,UACZ,MAAM,QAAQ;AAAA,UACd,QAAQ,QAAQ;AAAA,UAChB,cAAc,QAAQ;AAAA,UACtB,WAAW,QAAQ;AAAA,UACnB,cAAc,QAAQ;AAAA,UACtB,YAAY,QAAQ;AAAA,QACpB,EAAC;AAAA,MAED,SAAO,OAAO;AACfA,sBAAc,MAAA,MAAA,SAAA,8BAAA,cAAc,KAAK;AACjC,aAAK,WAAW;MACjB;AAAA,IACA;AAAA,IAED,cAAc,QAAQ;AACrB,YAAM,YAAY;AAAA,QACjB,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA;AAEd,aAAO,UAAU,MAAM,KAAK;AAAA,IAC5B;AAAA,IAED,SAAS,MAAM;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,6BAA6B,KAAK,EAAE;AAAA,MAC1C,CAAC;AAAA,IACD;AAAA,IAED,aAAa;AACZA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACP,CAAC;AAAA,IACD;AAAA,IAED,eAAe;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA,IAID,SAAS;AACRA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChBA,gCAAI,kBAAkB,UAAU;AAChCA,gCAAI,kBAAkB,OAAO;AAC7BA,0BAAAA,MAAI,WAAW;AAAA,cACd,KAAK;AAAA,YACN,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpMA,GAAG,WAAW,eAAe;"}